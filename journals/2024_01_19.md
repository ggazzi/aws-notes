- Doing [[Courses/Cantrill/Tech Fundamentals]]
  collapsed:: true
	- [[OSI 7-layer networking model]]
		- Layer 1: Physical
			- Describes how to read/write raw bit streams on a shared physical medium.
			- Examples: voltages on a copper wire, radio signals for wireless communication.
			- No access control, no collision detection
			- L1 hubs join separate pieces into a single shared medium
		- Layer 2: Data Link
			- Describes how to read/write **frames** on an L1 shared medium
			- Use [MAC Addresses]([[MAC Address]]) to have unicast as well as broadcast
			- Adds error detection and correction in case of corruption
			- Defines how to avoid collisions in the shared medium
			- L2 switches join separate pieces of an L1 network and reduced collisions by remembering which MAC addresses are in each of the pieces
		- Layer 3: Network
			- Mostly, the Internet Protocol ([[IP]])
			- Joins together multiple L2 networks
			- Cross-network IP addressing and routing
			- Uses packets to include data and addressing
			- Packets are encapsulated into L2 frames, multiple times along a journey
				- Routing will tell you what the next step is, which will determine a MAC address for the next hop
		- Layer 4&5: Transport and Session
			- Concepts are separate, but implementation is usually coupled
			- Mostly, [[TCP]] and [[UDP]]
			- Adds communication channels (via ports) so that multiple apps on a machine can use the network independently from each other
			- Uses segments that are encapsulated into packets
			- In TCP, segment adds, among others
				- source/destination ports
				- sequencing information
				- flow control
				- error detection (checksum)
			- TCP has a protocol to initiate a bidirectional connection
				- 3-way handshake
				- Client SYN -> Server
				- Server SYN-ACK -> Client
				- Client ACK -> Server
				- After this, server and client can freely exchange segments
			- UDP only adds the ports and connection setup
			- Firewalls work at this level, both stateless and stateful
		- Layer 6: presentation
			- Translation of data for networking, such as character encoding, data compression, encryption/decryption
		- Layer 7: application
			- Higher-level protocols such as HTTP
	- [[Network Address Translation]] (NAT)
		- Due to limited amounts of IPv4 addresses, some address ranges are designated as _private_. These can be used in a local network, but not outside of it (because they aren't unique in the entire internet).
			- Not necessary for IPv6 due to the *massive* amount of addresses
		- In order for machines with private addresses to communicate with other networks, a _router_ can translate private IP addresses to public IP addresses when forwarding packets to other networks.
		- Static NAT: each private address allocated a fixed public IP address
			- That's how the [[AWS/Internet Gateway]] functions
		- Dynamic NAT: temporarily allocates public IP addresses from a pool to each private address, while it's needed.
		- Port Address Translation (PAT): temporarily allocates public (IP address, port) pairs to each private (IP address, port) pair while it's needed.
			- Allows many private addresses to use few public addresses at the same time
			- It's how the [[AWS/NATGateway]] functions
	- [[IPv4]] addressing and subnetting
		- An IP address can be split into two parts: a prefix determining the network and then a number for the machine.
		- The length of this prefix is purely determined by convention, denoted by adding for example `/16` after the IP address, when the first 16 bits denote the network.
		- This is mostly relevant for the configuration of routers and their routing tables
		- There are some global conventions for networks. Locally, you can split a network you manage into subnetworks.
	- [[DDoS]] attacks
		- Goal: overload a web service
		- Distributed: many many machines, difficult to block due to variety of IPs/Ranges
		- Different types:
			- Application Layer: HTTP Flood
				- botnet send requests directly to a server
				- when sending requests is much cheaper than providing responses
			- Protocol Attack: SYN Flood
				- botnet sends SYNs with spoofed source IPs
				- server doesn't even know who actually sent them
				- SYN-ACKs get ignored, server is busy waiting for the responses
			- DNS Amplification
				- botnet sends requests to DNS servers with spoofed source address, using the  application server's address
				- DNS servers send information to our application servers
				- Bandwidth of application server gets hogged by these DNS responses
	- [[VLANS]]
		- Extension of L2 protocols (Ethernet) to split a big LAN into isolated virtual networks
		- 802.1Q adds a field to frame headers that identifies a subnet
		- 801.1AD aka QinQ, provider bridging, stacked VLANS
			- Adds another VLAN field called "service tag" so a service provider can use VLANs that don't interfere with their customer's VLANs
		- This requires switches that are compatible with 802.1Q or 801.1AD
			- These switches have two kinds of ports, depending on whether the devices connected to it are 802.1Q capable
				- Access ports: not capable, everything connected to this port belongs to a single VLAN.
				- Trunk ports: capable, carry traffic for multiple VLANs, require frames to be tagged
			- End-machines are connected to access ports and need no knowledge of 802.1Q
			- When sending a frame through a trunk port, the sender will ensure there is a VLAN tag.
			- When sending a frame through an access port, the sender will ensure there is _no_ VLAN tag.
			- Broadcasting on a VLAN will not be visible to other VLANs.
	- [[SSL]] and [[TLS]]
		- TLS is just a newer/better version of SSL
		- Ensures privacy and data integrity between a client and a server
		- This is [[encryption in transit]]
		- Starts with [[asymmetric encryption]], then switches to [[symmetric encryption]] as it's cheaper
		- Verifies identity of participants
			- Usually client verifies the server
			- Server could also verify the client
		- Can detect alteration of the message in transit
		- TLS connection is set up in a few steps
			- Set up TCP connection
			- Cipher Suites
				- Client HELLO, including list of supported Cipher Suites
				- Server HELLO, including the chosen Cipher Suite and server certificate (containing the server public key)
			- Authentication
				- Client validates server certificate and public key
				- Based on a trusted [[Certificate Autority]] (CA), who has issued the signed certificate for a server including the server's public key
				- Client asks CA that certificate is valid, hasn't been revoked and matches the DNS name
			- Key Exchange
				- Client and server exchange a symmetric key in a secure way
				- Exact algorithm varies and is complicated cryptography
	- Stateless vs Stateful [Firewalls]([[Firewall]])
		- Stateless firewalls don't understand ongoing L5 connections
			- Requires 2 rules per connection, separate for inbound and outbound packets
			- Very simple/fast/cheap
			- Problem: handling ephemeral ports. You have to allow the full range of ephemeral ports, or none of them.
		- Stateful firewalls can identify what is a response and for which request it is
			- Requires less rules: allowing a request (whether inbound or outbound) means the response is also allowed
	- L7 [Firewalls]([[Firewall]])
		- Support L7 protocols such as HTTP
		- Can inspect, block, replace or tag the data inside packets
		- Can identify abnormal requests, protocol-specific attacks
	- [[IPSEC]] and [[VPN]] fundamentals
		- IPSEC is a group of protocols to set up secure tunnels across insecure networks
		- Two main phases
		- IKE Phase 1
			- Authenticate
			- Use [[asymmetric encryption]] to create a shared [symmetric key]([[symmetric encryption]])
			- Now you have an IKE phase 1 tunnel
			- This process is somewhat expensive
		- IKE Phase 2
			- On top of Phase 1
			- Both sides negotiate and create a symmetrical IPSEC key, designed for bulk encryption and decryption
			- Actually has two tunnels (aka Security Associations, SA), one for each direction
			- Creating a phase 2 tunnel is much faster and cheaper
		- In general, you keep a persistent Phase 1 tunnel and create ephemeral Phase 2 tunnels
		- Two kinds of [[VPN]]
			- Policy-based: rule sets that match traffic
				- different traffic types have separate pairs of SA
			- Route-based VPN: rules based on prefixes of addresses